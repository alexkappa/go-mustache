box: golang:1.8
build:
  steps:
    - wercker/setup-go-workspace:
        package-dir: github.com/alexkappa/mustache
    - script:
        name: update submodules
        code: |
          git submodule update --init --recursive
    - script:
        name: go build
        code: |
          go build
    - script:
        name: go test
        code: |
          go test -coverprofile=coverage.out
    - yieldr/test-reporter@0.4.2:
        id: $CODECLIMATE_REPO_TOKEN
        coverage-input-type: gocov
        command: after-build
        arguments: coverage.out
